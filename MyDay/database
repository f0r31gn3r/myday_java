-- Create schema

DROP SCHEMA `myday`;
commit;

CREATE SCHEMA `myday` ;

-- Create Table: ACCOUNT



CREATE TABLE myday.ACCOUNT
(
	`ACCOUNT_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (ACCOUNT_ID)
	,`LOGIN` VARCHAR(30)  NULL UNIQUE
	,`PASSWORD` VARCHAR(30)  NULL
	,`FIRST_NAME` VARCHAR(50)  NULL 
	,`LAST_NAME` VARCHAR(50)  NULL 
	,`CREATED` DATETIME  NULL 
	,`LAST_VISITED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Table: COMMENTS

CREATE TABLE myday.COMMENTS 
(
	`COMMENT_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (COMMENT_ID)
	,`POST_ID` INT  NULL 
	,`AUTHOR` INT  NULL
	,`BODY` VARCHAR(300)  NULL 
	,`CREATED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Table: POSTS

CREATE TABLE myday.POSTS
(
	`POST_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (POST_ID)
	,`TITLE` VARCHAR(250)  NULL 
	,`CREATED` DATETIME  NULL 
	,`LAST_MODIFIED` DATETIME  NULL 
	,`AUTHOR` INT  NULL 
	,`BODY` VARCHAR(1000)  NULL 
)
ENGINE=INNODB;



-- Create Table: VISITORS

CREATE TABLE myday.VISITORS
(
	`VISITOR_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (VISITOR_ID)
	,`URL` VARCHAR(250)  NULL 
	,`ACCOUNT_ID` INT  NULL 
	,`REFERER` VARCHAR(250)  NULL 
	,`TIME_VISITED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Foreign Key: COMMENTS.AUTHOR -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.COMMENTS ADD FOREIGN KEY (AUTHOR) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: POSTS.AUTHOR -> ACCOUNT.ACCOUNT_ID
--  ALTER TABLE myday.POSTS ADD FOREIGN KEY (AUTHOR) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: COMMENTS.POST_ID -> POSTS.POST_ID
-- ALTER TABLE myday.COMMENTS ADD FOREIGN KEY (POST_ID) REFERENCES POSTS(POST_ID);


-- Create Foreign Key: VISITORS.ACCOUNT_ID -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.VISITORS ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: LOGIN.ACCOUNT_ID -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.LOGIN ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT(ACCOUNT_ID);


-- -----------------------------------------------------------------------------------
-- --		Some dummy data ---

insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Noob','Vasyly','Pupkin', '123');
insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Crazy','Masha','Pupkina', '321');
insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Odmen','Anonim','Anonimin', 'zzz');

insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,1,'Comment1', NOW());
insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,2,'Com22222', NOW());
insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,1,'Commmm33333', NOW());

INSERT INTO myday.POSTS VALUES (4,'Japan landslide','2014-08-23 10:19:17',NULL,2,'Rescuers have been searching desperately for survivors in Japan\'s Hiroshima prefecture where a landslide killed at least 42 people.\r\n\r\nAt least 43 others are missing, officials told the Kyodo news agency.\r\n\r\nPolice quoted by the agency say that more people could be unaccounted for, buried by mudslides and not yet reported as missing.\r\n\r\nAbout 3,000 rescue personnel have been trying to remove mud and debris hampering the search.\r\n\r\nTorrential rains have led to the evacuation of up to 100,000 people.\r\n\r\nExperts say the chances of survival for people trapped without food or water in such a disaster decreases significantly after the first 72 hours, which passed early on Saturday.'),(5,'Japan landslide','2014-08-23 10:19:22',NULL,3,'Rescuers have been searching desperately for survivors in Japan\'s Hiroshima prefecture where a landslide killed at least 42 people.\r\n\r\nAt least 43 others are missing, officials told the Kyodo news agency.\r\n\r\nPolice quoted by the agency say that more people could be unaccounted for, buried by mudslides and not yet reported as missing.\r\n\r\nAbout 3,000 rescue personnel have been trying to remove mud and debris hampering the search.\r\n\r\nTorrential rains have led to the evacuation of up to 100,000 people.\r\n\r\nExperts say the chances of survival for people trapped without food or water in such a disaster decreases significantly after the first 72 hours, which passed early on Saturday.'),(6,'Japan landslide','2014-08-23 10:19:26',NULL,1,'Rescuers have been searching desperately for survivors in Japan\'s Hiroshima prefecture where a landslide killed at least 42 people.\r\n\r\nAt least 43 others are missing, officials told the Kyodo news agency.\r\n\r\nPolice quoted by the agency say that more people could be unaccounted for, buried by mudslides and not yet reported as missing.\r\n\r\nAbout 3,000 rescue personnel have been trying to remove mud and debris hampering the search.\r\n\r\nTorrential rains have led to the evacuation of up to 100,000 people.\r\n\r\nExperts say the chances of survival for people trapped without food or water in such a disaster decreases significantly after the first 72 hours, which passed early on Saturday.'),(7,'NSA and GCHQ agents \'leak Tor bugs\'','2014-08-23 10:20:07',NULL,1,'British and American intelligence agents attempting to hack the \"dark web\" are being deliberately undermined by colleagues, it has been alleged.\r\n\r\nSpies from both countries have been working on finding flaws in Tor, a popular way of anonymously accessing \"hidden\" sites.\r\n\r\nBut the team behind Tor says other spies are tipping them off, allowing them to quickly fix any vulnerabilities.\r\n\r\nThe agencies declined to comment.\r\n\r\nThe allegations were made in an interview given to the BBC by Andrew Lewman, who is responsible for all the Tor Project\'s operations.\r\n\r\nHe said leaks had come from both the UK Government Communications Headquarters (GCHQ) and the US National Security Agency (NSA).\r\n\r\nBy fixing these flaws, the project can protect users\' anonymity, he said.'),(8,'NSA and GCHQ agents \'leak Tor bugs\'','2014-08-23 10:20:11',NULL,2,'British and American intelligence agents attempting to hack the \"dark web\" are being deliberately undermined by colleagues, it has been alleged.\r\n\r\nSpies from both countries have been working on finding flaws in Tor, a popular way of anonymously accessing \"hidden\" sites.\r\n\r\nBut the team behind Tor says other spies are tipping them off, allowing them to quickly fix any vulnerabilities.\r\n\r\nThe agencies declined to comment.\r\n\r\nThe allegations were made in an interview given to the BBC by Andrew Lewman, who is responsible for all the Tor Project\'s operations.\r\n\r\nHe said leaks had come from both the UK Government Communications Headquarters (GCHQ) and the US National Security Agency (NSA).\r\n\r\nBy fixing these flaws, the project can protect users\' anonymity, he said.'),(9,'NSA and GCHQ agents \'leak Tor bugs\'','2014-08-23 10:20:14',NULL,3,'British and American intelligence agents attempting to hack the \"dark web\" are being deliberately undermined by colleagues, it has been alleged.\r\n\r\nSpies from both countries have been working on finding flaws in Tor, a popular way of anonymously accessing \"hidden\" sites.\r\n\r\nBut the team behind Tor says other spies are tipping them off, allowing them to quickly fix any vulnerabilities.\r\n\r\nThe agencies declined to comment.\r\n\r\nThe allegations were made in an interview given to the BBC by Andrew Lewman, who is responsible for all the Tor Project\'s operations.\r\n\r\nHe said leaks had come from both the UK Government Communications Headquarters (GCHQ) and the US National Security Agency (NSA).\r\n\r\nBy fixing these flaws, the project can protect users\' anonymity, he said.'),(10,'Gmail smartphone app hacked by researchers','2014-08-23 10:20:51',NULL,3,'US researchers say they have been able to hack into Gmail accounts with a 92% success rate by exploiting a weakness in smartphone memory.\r\n\r\nThe researchers were able to gain access to a number of apps, including Gmail, by disguising malicious software as another downloaded app.\r\n\r\nGmail was among the easiest to access from the popular apps tested.\r\n\r\nThe hack was tested on an Android phone, but the researchers believe it could work on other operating systems.\r\n\r\nA Google spokeswoman said the technology giant welcomed the research. \"Third-party research is one of the ways Android is made stronger and more secure,\" she said.\r\n\r\nThe research is being presented later at a cybersecurity conference in San Diego by academics from the universities of Michigan and California.\r\n\r\nOther apps hacked included H&R Block, Newegg, WebMD, Chase Bank, Hotels.com and Amazon.');
