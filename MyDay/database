-- Create schema

DROP SCHEMA `myday`;
commit;

CREATE SCHEMA `myday` ;

-- Create Table: ACCOUNT



CREATE TABLE myday.ACCOUNT
(
	`ACCOUNT_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (ACCOUNT_ID)
	,`LOGIN` VARCHAR(30)  NULL UNIQUE
	,`PASSWORD` VARCHAR(30)  NULL
	,`FIRST_NAME` VARCHAR(50)  NULL 
	,`LAST_NAME` VARCHAR(50)  NULL 
	,`CREATED` DATETIME  NULL 
	,`LAST_VISITED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Table: COMMENTS

CREATE TABLE myday.COMMENTS 
(
	`COMMENT_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (COMMENT_ID)
	,`POST_ID` INT  NULL 
	,`AUTHOR` INT  NULL
	,`BODY` VARCHAR(300)  NULL 
	,`CREATED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Table: POSTS

CREATE TABLE myday.POSTS
(
	`POST_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (POST_ID)
	,`TITLE` VARCHAR(250)  NULL 
	,`CREATED` DATETIME  NULL 
	,`LAST_MODIFIED` DATETIME  NULL 
	,`AUTHOR` INT  NULL 
	,`BODY` VARCHAR(1000)  NULL 
)
ENGINE=INNODB;



-- Create Table: VISITORS

CREATE TABLE myday.VISITORS
(
	`VISITOR_ID` INT NOT NULL AUTO_INCREMENT
	,PRIMARY KEY (VISITOR_ID)
	,`URL` VARCHAR(250)  NULL 
	,`ACCOUNT_ID` INT  NULL 
	,`REFERER` VARCHAR(250)  NULL 
	,`TIME_VISITED` DATETIME  NULL 
)
ENGINE=INNODB;



-- Create Foreign Key: COMMENTS.AUTHOR -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.COMMENTS ADD FOREIGN KEY (AUTHOR) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: POSTS.AUTHOR -> ACCOUNT.ACCOUNT_ID
--  ALTER TABLE myday.POSTS ADD FOREIGN KEY (AUTHOR) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: COMMENTS.POST_ID -> POSTS.POST_ID
-- ALTER TABLE myday.COMMENTS ADD FOREIGN KEY (POST_ID) REFERENCES POSTS(POST_ID);


-- Create Foreign Key: VISITORS.ACCOUNT_ID -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.VISITORS ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT(ACCOUNT_ID);


-- Create Foreign Key: LOGIN.ACCOUNT_ID -> ACCOUNT.ACCOUNT_ID
-- ALTER TABLE myday.LOGIN ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT(ACCOUNT_ID);


-------------------------------------------------------------------------------------
---		Some dummy data ---

insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Noob','Vasyly','Pupkin', '123');
insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Crazy','Masha','Pupkina', '321');
insert into myday.ACCOUNT (LOGIN,FIRST_NAME, LAST_NAME, PASSWORD ) values ('Odmen','Anonim','Anonimin', 'zzz');

insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,1,'Comment1', NOW());
insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,2,'Com22222', NOW());
insert into myday.COMMENTS (POST_ID,AUTHOR, BODY, CREATED) values (1,1,'Commmm33333', NOW());


